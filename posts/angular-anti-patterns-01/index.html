<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Angular anti-patterns #01: Subscribing to every observable | Jakob Emmerling</title><meta name=keywords content="angular,angular-anti-patterns"><meta name=description content="Rxjs is probably the most difficult thing to grasp when starting out with angular.
For that reason often times the benefits of rxjs are not used and code like the following is written.
@Component({
  selector: 'app-subscribing-to-everything-bad',
  standalone: true,
  imports: [CommonModule],
  template: `
    <h3>Bad</h3>
    <p>{{result}}</p>
  `
})
export class SubscribingToEverythingBadComponent {
  result: string | undefined;

  constructor(someService: SomeServiceService) {
    someService.loadSomething().subscribe((result) => {
      this.result = result;
    });
  }
}
The first thing that comes to ones mind when seeing observables would be to subscribe to get the value out of there.
Because then you can treat it like any normal variable without needing to learn anything about rxjs.
And as in this example this actually works as expected. But lets continue on and we will see why we want to avoid that kind of code."><meta name=author content><link rel=canonical href=https://jakobemmerling.de/posts/angular-anti-patterns-01/><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=https://jakobemmerling.de/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jakobemmerling.de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jakobemmerling.de/favicon-32x32.png><link rel=apple-touch-icon href=https://jakobemmerling.de/apple-touch-icon.png><link rel=mask-icon href=https://jakobemmerling.de/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://jakobemmerling.de/posts/angular-anti-patterns-01/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://jakobemmerling.de/posts/angular-anti-patterns-01/"><meta property="og:site_name" content="Jakob Emmerling"><meta property="og:title" content="Angular anti-patterns #01: Subscribing to every observable"><meta property="og:description" content="Rxjs is probably the most difficult thing to grasp when starting out with angular. For that reason often times the benefits of rxjs are not used and code like the following is written.
@Component({ selector: 'app-subscribing-to-everything-bad', standalone: true, imports: [CommonModule], template: ` <h3>Bad</h3> <p>{{result}}</p> ` }) export class SubscribingToEverythingBadComponent { result: string | undefined; constructor(someService: SomeServiceService) { someService.loadSomething().subscribe((result) => { this.result = result; }); } } The first thing that comes to ones mind when seeing observables would be to subscribe to get the value out of there. Because then you can treat it like any normal variable without needing to learn anything about rxjs. And as in this example this actually works as expected. But lets continue on and we will see why we want to avoid that kind of code."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-17T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-17T00:00:00+00:00"><meta property="article:tag" content="Angular"><meta property="article:tag" content="Angular-Anti-Patterns"><meta name=twitter:card content="summary"><meta name=twitter:title content="Angular anti-patterns #01: Subscribing to every observable"><meta name=twitter:description content="Rxjs is probably the most difficult thing to grasp when starting out with angular.
For that reason often times the benefits of rxjs are not used and code like the following is written.
@Component({
  selector: 'app-subscribing-to-everything-bad',
  standalone: true,
  imports: [CommonModule],
  template: `
    <h3>Bad</h3>
    <p>{{result}}</p>
  `
})
export class SubscribingToEverythingBadComponent {
  result: string | undefined;

  constructor(someService: SomeServiceService) {
    someService.loadSomething().subscribe((result) => {
      this.result = result;
    });
  }
}
The first thing that comes to ones mind when seeing observables would be to subscribe to get the value out of there.
Because then you can treat it like any normal variable without needing to learn anything about rxjs.
And as in this example this actually works as expected. But lets continue on and we will see why we want to avoid that kind of code."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://jakobemmerling.de/posts/"},{"@type":"ListItem","position":2,"name":"Angular anti-patterns #01: Subscribing to every observable","item":"https://jakobemmerling.de/posts/angular-anti-patterns-01/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Angular anti-patterns #01: Subscribing to every observable","name":"Angular anti-patterns #01: Subscribing to every observable","description":"Rxjs is probably the most difficult thing to grasp when starting out with angular. For that reason often times the benefits of rxjs are not used and code like the following is written.\n@Component({ selector: \u0026#39;app-subscribing-to-everything-bad\u0026#39;, standalone: true, imports: [CommonModule], template: ` \u0026lt;h3\u0026gt;Bad\u0026lt;/h3\u0026gt; \u0026lt;p\u0026gt;{{result}}\u0026lt;/p\u0026gt; ` }) export class SubscribingToEverythingBadComponent { result: string | undefined; constructor(someService: SomeServiceService) { someService.loadSomething().subscribe((result) =\u0026gt; { this.result = result; }); } } The first thing that comes to ones mind when seeing observables would be to subscribe to get the value out of there. Because then you can treat it like any normal variable without needing to learn anything about rxjs. And as in this example this actually works as expected. But lets continue on and we will see why we want to avoid that kind of code.\n","keywords":["angular","angular-anti-patterns"],"articleBody":"Rxjs is probably the most difficult thing to grasp when starting out with angular. For that reason often times the benefits of rxjs are not used and code like the following is written.\n@Component({ selector: 'app-subscribing-to-everything-bad', standalone: true, imports: [CommonModule], template: ` Bad {{result}}\n` }) export class SubscribingToEverythingBadComponent { result: string | undefined; constructor(someService: SomeServiceService) { someService.loadSomething().subscribe((result) =\u003e { this.result = result; }); } } The first thing that comes to ones mind when seeing observables would be to subscribe to get the value out of there. Because then you can treat it like any normal variable without needing to learn anything about rxjs. And as in this example this actually works as expected. But lets continue on and we will see why we want to avoid that kind of code.\nProblem Lets image the service call now needs an id from the url to fetch the needed data. No problem, lets inject the activatedRoute and get the parameters from there.\n@Component({/** same as before **/} export class SubscribingToEverythingBadComponent { result: string | undefined; private id: string | undefined | null; constructor(someService: SomeServiceService, activatedRoute: ActivatedRoute) { activatedRoute.queryParamMap.subscribe(map =\u003e { this.id = map.get('id'); }); someService.loadSomething(this.id!!).subscribe((result) =\u003e { this.result = result; }); } } Ok, so now we read the id parameter from the activated route queryParamMap attribute which happens to be another observable. Then we are using that id as a parameter to our service call. It does not take a long time to find out that this does not work. And this is where people unfamiliar with rxjs and angular often times get confused. I have been there too.\nOne could come to the conclusion that the subscribe is not executing fast enough before the service is called and come up with the following code.\n@Component({/** same as before **/} export class SubscribingToEverythingBadComponent { result: string | undefined; private id: string | undefined | null; constructor(someService: SomeServiceService, activatedRoute: ActivatedRoute) { activatedRoute.queryParamMap.subscribe(map =\u003e { this.id = map.get('id'); }); setTimeout(() =\u003e { someService.loadSomething(this.id!!).subscribe((result) =\u003e { this.result = result; }); }): } } With that change the code will work again as expected, at least in the simple case of the first page load. But if we happen to change the route parameter without reloading the page the service will not be called with the changed id and we will get inconsistent results. And all of that comes from the fact that we try to work against the asynchronous nature of observables by subscribing anytime we have the chance to do so.\nSolution We can get rid of these problems if we do not subscribe to everything and instead work with the powerful utilities that rxjs offers.\n@Component({ selector: 'app-subscribing-to-everything-good', standalone: true, imports: [CommonModule], template: ` Good {{result | async}}\n` }) export class SubscribingToEverythingGoodComponent { result: Observable\u003cstring\u003e constructor(someService: SomeServiceService, activatedRoute: ActivatedRoute) { this.result = someService.loadSomething(); } } Instead of subscribing to the Observable ourselves we use the async pipe to let angular take care of subscribing. This has additional advantages when it comes to long lived observables that automatically gets unsubscribed when the component is destroyed. So far the result of the code is the same as in the first code example.\nIf we continue to add the id from the url parameters we will see the benefits we get.\n@Component({/** same as before **/} export class SubscribingToEverythingGoodComponent { result: Observable\u003cstring\u003e constructor(private someService: SomeServiceService, private activatedRoute: ActivatedRoute) { this.result = activatedRoute.queryParamMap.pipe( switchMap(map =\u003e this.someService.loadSomething(map.get('id')!!)) ) } } Instead of subscribing to the activated route we use the switchMap operator to use the id for our service call. The result will be an obersable that emits every time the activated route changes and the data is loaded from the service.\nThis will now also work when the route changes and give us consistent results.\nOf course it sometimes is totally valid to subscribe to observables in your component code, but I would advise to do so rarely and always think about if it is really needed as it often time leads to code that works against rxjs.\n","wordCount":"675","inLanguage":"en","datePublished":"2022-11-17T00:00:00Z","dateModified":"2022-11-17T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://jakobemmerling.de/posts/angular-anti-patterns-01/"},"publisher":{"@type":"Organization","name":"Jakob Emmerling","logo":{"@type":"ImageObject","url":"https://jakobemmerling.de/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://jakobemmerling.de/ accesskey=h title="Jakob Emmerling (Alt + H)">Jakob Emmerling</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Angular anti-patterns #01: Subscribing to every observable</h1><div class=post-meta><span title='2022-11-17 00:00:00 +0000 UTC'>November 17, 2022</span></div></header><div class=post-content><p>Rxjs is probably the most difficult thing to grasp when starting out with angular.
For that reason often times the benefits of rxjs are not used and code like the following is written.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;app-subscribing-to-everything-bad&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>standalone</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>imports</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>CommonModule</span>],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;h3&gt;Bad&lt;/h3&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;p&gt;{{result}}&lt;/p&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  `</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SubscribingToEverythingBadComponent</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>result</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#a6e22e>someService</span>: <span style=color:#66d9ef>SomeServiceService</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>someService</span>.<span style=color:#a6e22e>loadSomething</span>().<span style=color:#a6e22e>subscribe</span>((<span style=color:#a6e22e>result</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>result</span>;
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The first thing that comes to ones mind when seeing observables would be to subscribe to get the value out of there.
Because then you can treat it like any normal variable without needing to learn anything about rxjs.
And as in this example this actually works as expected. But lets continue on and we will see why we want to avoid that kind of code.</p><h2 id=problem>Problem<a hidden class=anchor aria-hidden=true href=#problem>#</a></h2><p>Lets image the service call now needs an id from the url to fetch the needed data.
No problem, lets inject the activatedRoute and get the parameters from there.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({<span style=color:#75715e>/** same as before **/</span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SubscribingToEverythingBadComponent</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>result</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#a6e22e>someService</span>: <span style=color:#66d9ef>SomeServiceService</span>, <span style=color:#a6e22e>activatedRoute</span>: <span style=color:#66d9ef>ActivatedRoute</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>activatedRoute</span>.<span style=color:#a6e22e>queryParamMap</span>.<span style=color:#a6e22e>subscribe</span>(<span style=color:#a6e22e>map</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>.<span style=color:#66d9ef>get</span>(<span style=color:#e6db74>&#39;id&#39;</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>someService</span>.<span style=color:#a6e22e>loadSomething</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>id</span><span style=color:#f92672>!!</span>).<span style=color:#a6e22e>subscribe</span>((<span style=color:#a6e22e>result</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>result</span>;
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Ok, so now we read the id parameter from the activated route <code>queryParamMap</code> attribute which happens to be another observable.
Then we are using that id as a parameter to our service call.
It does not take a long time to find out that this <strong>does not work</strong>. And this is where people unfamiliar with rxjs and angular often times get confused.
I have been there too.</p><p>One could come to the conclusion that the subscribe is not executing <em>fast</em> enough before the service is called and come up with the following code.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({<span style=color:#75715e>/** same as before **/</span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SubscribingToEverythingBadComponent</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>result</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#a6e22e>someService</span>: <span style=color:#66d9ef>SomeServiceService</span>, <span style=color:#a6e22e>activatedRoute</span>: <span style=color:#66d9ef>ActivatedRoute</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>activatedRoute</span>.<span style=color:#a6e22e>queryParamMap</span>.<span style=color:#a6e22e>subscribe</span>(<span style=color:#a6e22e>map</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>.<span style=color:#66d9ef>get</span>(<span style=color:#e6db74>&#39;id&#39;</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setTimeout</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>someService</span>.<span style=color:#a6e22e>loadSomething</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>id</span><span style=color:#f92672>!!</span>).<span style=color:#a6e22e>subscribe</span>((<span style=color:#a6e22e>result</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>result</span>;
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    })<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>With that change the code will work again as expected, at least in the simple case of the first page load.
But if we happen to change the route parameter without reloading the page the service will not be called with the changed id and we will get inconsistent results. And all of that comes from the fact that we try to <strong>work against the asynchronous nature of observables</strong> by subscribing anytime we have the chance to do so.</p><h2 id=solution>Solution<a hidden class=anchor aria-hidden=true href=#solution>#</a></h2><p>We can get rid of these problems if we do not subscribe to everything and instead work with the powerful utilities that rxjs offers.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;app-subscribing-to-everything-good&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>standalone</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>imports</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>CommonModule</span>],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;h3&gt;Good&lt;/h3&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;p&gt;{{result | async}}&lt;/p&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  `</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SubscribingToEverythingGoodComponent</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>result</span>: <span style=color:#66d9ef>Observable</span>&lt;<span style=color:#f92672>string</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#a6e22e>someService</span>: <span style=color:#66d9ef>SomeServiceService</span>, <span style=color:#a6e22e>activatedRoute</span>: <span style=color:#66d9ef>ActivatedRoute</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>someService</span>.<span style=color:#a6e22e>loadSomething</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Instead of subscribing to the Observable ourselves we use the async pipe to let angular take care of subscribing. This has additional advantages when it comes to long lived observables that automatically gets unsubscribed when the component is destroyed.
So far the result of the code is the same as in the first code example.</p><p>If we continue to add the id from the url parameters we will see the benefits we get.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({<span style=color:#75715e>/** same as before **/</span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SubscribingToEverythingGoodComponent</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>result</span>: <span style=color:#66d9ef>Observable</span>&lt;<span style=color:#f92672>string</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>private</span> <span style=color:#a6e22e>someService</span>: <span style=color:#66d9ef>SomeServiceService</span>, <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>activatedRoute</span>: <span style=color:#66d9ef>ActivatedRoute</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>activatedRoute</span>.<span style=color:#a6e22e>queryParamMap</span>.<span style=color:#a6e22e>pipe</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>switchMap</span>(<span style=color:#a6e22e>map</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>someService</span>.<span style=color:#a6e22e>loadSomething</span>(<span style=color:#a6e22e>map</span>.<span style=color:#66d9ef>get</span>(<span style=color:#e6db74>&#39;id&#39;</span>)<span style=color:#f92672>!!</span>))
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Instead of subscribing to the activated route we use the <code>switchMap</code> operator to use the id for our service call.
The result will be an obersable that emits every time the activated route changes and the data is loaded from the service.</p><p>This will now also work when the route changes and give us consistent results.</p><blockquote><p>Of course it sometimes is totally valid to subscribe to observables in your component code, but I would advise to do so rarely and always think about if it is really needed as it often time leads to code that works against rxjs.</p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://jakobemmerling.de/tags/angular/>Angular</a></li><li><a href=https://jakobemmerling.de/tags/angular-anti-patterns/>Angular-Anti-Patterns</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://jakobemmerling.de/>Jakob Emmerling</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>