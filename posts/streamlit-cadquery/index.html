<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Generating 3d models with cadquery and streamlit | Jakob Emmerling</title><meta name=keywords content="python,3d-printing"><meta name=description content="I have been toying around with generating customizable 3d models for 3d printing for a while now. I wrote code to generate cookie cutters, name clips for charging cables and a few other things.
Recently I had the idea to use streamlit to create a UI for the creation of those customizable models.
In this post I will use a simple example to showcase how this can be done.
The example will be a simple badge with a customizable text embossed on it.
I will use cadquery to generate the 3d model with python code and streamlit to create a web interface for generating the model."><meta name=author content><link rel=canonical href=https://jakobemmerling.de/posts/streamlit-cadquery/><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=https://jakobemmerling.de/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jakobemmerling.de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jakobemmerling.de/favicon-32x32.png><link rel=apple-touch-icon href=https://jakobemmerling.de/apple-touch-icon.png><link rel=mask-icon href=https://jakobemmerling.de/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://jakobemmerling.de/posts/streamlit-cadquery/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://jakobemmerling.de/posts/streamlit-cadquery/"><meta property="og:site_name" content="Jakob Emmerling"><meta property="og:title" content="Generating 3d models with cadquery and streamlit"><meta property="og:description" content="I have been toying around with generating customizable 3d models for 3d printing for a while now. I wrote code to generate cookie cutters, name clips for charging cables and a few other things. Recently I had the idea to use streamlit to create a UI for the creation of those customizable models.
In this post I will use a simple example to showcase how this can be done. The example will be a simple badge with a customizable text embossed on it. I will use cadquery to generate the 3d model with python code and streamlit to create a web interface for generating the model."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-15T00:00:00+00:00"><meta property="article:modified_time" content="2022-12-15T00:00:00+00:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="3d-Printing"><meta name=twitter:card content="summary"><meta name=twitter:title content="Generating 3d models with cadquery and streamlit"><meta name=twitter:description content="I have been toying around with generating customizable 3d models for 3d printing for a while now. I wrote code to generate cookie cutters, name clips for charging cables and a few other things.
Recently I had the idea to use streamlit to create a UI for the creation of those customizable models.
In this post I will use a simple example to showcase how this can be done.
The example will be a simple badge with a customizable text embossed on it.
I will use cadquery to generate the 3d model with python code and streamlit to create a web interface for generating the model."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://jakobemmerling.de/posts/"},{"@type":"ListItem","position":2,"name":"Generating 3d models with cadquery and streamlit","item":"https://jakobemmerling.de/posts/streamlit-cadquery/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Generating 3d models with cadquery and streamlit","name":"Generating 3d models with cadquery and streamlit","description":"I have been toying around with generating customizable 3d models for 3d printing for a while now. I wrote code to generate cookie cutters, name clips for charging cables and a few other things. Recently I had the idea to use streamlit to create a UI for the creation of those customizable models.\nIn this post I will use a simple example to showcase how this can be done. The example will be a simple badge with a customizable text embossed on it. I will use cadquery to generate the 3d model with python code and streamlit to create a web interface for generating the model.\n","keywords":["python","3d-printing"],"articleBody":"I have been toying around with generating customizable 3d models for 3d printing for a while now. I wrote code to generate cookie cutters, name clips for charging cables and a few other things. Recently I had the idea to use streamlit to create a UI for the creation of those customizable models.\nIn this post I will use a simple example to showcase how this can be done. The example will be a simple badge with a customizable text embossed on it. I will use cadquery to generate the 3d model with python code and streamlit to create a web interface for generating the model.\nCadquery A python parametric CAD scripting framework based on OCCT\nCadquery is a python library that allows to create 3d models with python code. It is based on a powerful 3d modeling engine called OpenCascade.\nIn contrast to OpenSCAD, which is another tool to programmatically generate 3d models, cadquery is based on python which makes it really easy to get started with it as you don’t have to learn some new language.\n# The dimensions of the box. These can be modified rather than changing the # object's code directly. length = 80.0 height = 60.0 thickness = 10.0 center_hole_dia = 22.0 # Create a box based on the dimensions above and add a 22mm center hole result = (cq.Workplane(\"XY\") .box(length, height, thickness) .faces(\"\u003eZ\") .workplane() .hole(center_hole_dia)) This is a simple example from the docs which generates a box with a hole in the center. You can see that the first step is the creation of a box on the XY plane. Next a hole is added on the positive Z plane of the box. The \u003eZ string that is used here is an example for a selector. Selectors are a powerful way to select faces, edges, or vertices in your model and are at the same time pretty intuitive. You can read more about them here.\nStreamlit A faster way to build and share data apps\nStreamlit is usually used for creating interactive data science web applications. It does this by allowing you to write python code to render interactive elements on a page.\nst.title('Uber pickups in NYC') data = load_data(10000) if st.checkbox('Show raw data'): st.subheader('Raw data') st.write(data) st.subheader('Number of pickups by hour') hist_values = np.histogram(...) st.bar_chart(hist_values) This is an simplified example from the streamlit docs. It renders a checkbox that can be checked to show the data in a table and below that it displays a histogram of the data. By using the checkbox method call inside the if statement condition the table is only rendered when the checkbox is checked.\nThe result looks like this: I really like this approach to build simple user interfaces, because you don’t have to worry about writing html/css/js + something on the server side and instead you just write a few lines of python code and get a good looking web interface. Of course this approach is not feasible for complex or bigger web applications, but I think especially in the context of interactive data apps this is really cool.\nCombining the two tools Next up we will see how we can combine cadquery and streamlit to build a simple web interface for generating customizable 3d models.\nWe use cadquery to define a function that creates a 3d model and saves this model as a stl file. The model is a box with rounded edges and text embossed in it.\ndef generate_model(text: str): model = (cq.Workplane() .box(20, 8, 2) .edges(\"|Z\") .fillet(1) .faces(\"\u003eZ\") .workplane().text(text, 5, -0.4) ) _, path = tempfile.mkstemp(suffix='.stl') cq.exporters.export(model, path) return path Next up we use streamlit to render an input element and based on the value of this field we generate the model and show it using a custom streamlit component. Additionally we add a download button to enable downloading the model.\nThe custom streamlit component uses threejs under the hood to render the model in the browser and I will probably write a separate post about this component and publish it to the python registry later on.\ntext = st.text_input(\"Text\") if text != \"\": stl_path = generate_model(text) sv.stl_viewer(stl_path) with open(stl_path, 'rb') as f: st.download_button( label=\"Download model\", data=f.read(), file_name='model.stl') os.remove(file) And that is all we need to do. The result is a simple interface to generate customizable 3d models that can then be downloaded and 3d printed.\n","wordCount":"724","inLanguage":"en","datePublished":"2022-12-15T00:00:00Z","dateModified":"2022-12-15T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://jakobemmerling.de/posts/streamlit-cadquery/"},"publisher":{"@type":"Organization","name":"Jakob Emmerling","logo":{"@type":"ImageObject","url":"https://jakobemmerling.de/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://jakobemmerling.de/ accesskey=h title="Jakob Emmerling (Alt + H)">Jakob Emmerling</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Generating 3d models with cadquery and streamlit</h1><div class=post-meta><span title='2022-12-15 00:00:00 +0000 UTC'>December 15, 2022</span></div></header><div class=post-content><p>I have been toying around with generating customizable 3d models for 3d printing for a while now. I wrote code to generate cookie cutters, name clips for charging cables and a few other things.
Recently I had the idea to use streamlit to create a UI for the creation of those customizable models.</p><p>In this post I will use a simple example to showcase how this can be done.
The example will be a simple badge with a customizable text embossed on it.
I will use cadquery to generate the 3d model with python code and streamlit to create a web interface for generating the model.</p><h2 id=cadquery><a href=https://github.com/CadQuery/cadquery>Cadquery</a><a hidden class=anchor aria-hidden=true href=#cadquery>#</a></h2><blockquote><p>A python parametric CAD scripting framework based on OCCT</p></blockquote><p>Cadquery is a python library that allows to create 3d models with python code.
It is based on a powerful 3d modeling engine called OpenCascade.</p><p>In contrast to OpenSCAD, which is another tool to programmatically generate 3d models, cadquery is based on python which makes it really easy to get started with it as you don&rsquo;t have to learn some new language.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># The dimensions of the box. These can be modified rather than changing the</span>
</span></span><span style=display:flex><span><span style=color:#75715e># object&#39;s code directly.</span>
</span></span><span style=display:flex><span>length <span style=color:#f92672>=</span> <span style=color:#ae81ff>80.0</span>
</span></span><span style=display:flex><span>height <span style=color:#f92672>=</span> <span style=color:#ae81ff>60.0</span>
</span></span><span style=display:flex><span>thickness <span style=color:#f92672>=</span> <span style=color:#ae81ff>10.0</span>
</span></span><span style=display:flex><span>center_hole_dia <span style=color:#f92672>=</span> <span style=color:#ae81ff>22.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create a box based on the dimensions above and add a 22mm center hole</span>
</span></span><span style=display:flex><span>result <span style=color:#f92672>=</span> (cq<span style=color:#f92672>.</span>Workplane(<span style=color:#e6db74>&#34;XY&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>box(length, height, thickness)
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>faces(<span style=color:#e6db74>&#34;&gt;Z&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>workplane()
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>hole(center_hole_dia))
</span></span></code></pre></div><p>This is a simple example from the <a href=https://cadquery.readthedocs.io/en/latest/quickstart.html>docs</a> which generates a box with a hole in the center.
You can see that the first step is the creation of a box on the XY plane. Next a hole is added on the positive Z plane of the box. The <code>>Z</code> string that is used here is an example for a selector. Selectors are a powerful way to select faces, edges, or vertices in your model and are at the same time pretty intuitive. You can read more about them <a href=https://cadquery.readthedocs.io/en/latest/selectors.html>here</a>.</p><h2 id=streamlit><a href=https://streamlit.io>Streamlit</a><a hidden class=anchor aria-hidden=true href=#streamlit>#</a></h2><blockquote><p>A faster way to build and share data apps</p></blockquote><p>Streamlit is usually used for creating interactive data science web applications.
It does this by allowing you to write python code to render interactive elements on a page.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>st<span style=color:#f92672>.</span>title(<span style=color:#e6db74>&#39;Uber pickups in NYC&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> load_data(<span style=color:#ae81ff>10000</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> st<span style=color:#f92672>.</span>checkbox(<span style=color:#e6db74>&#39;Show raw data&#39;</span>):
</span></span><span style=display:flex><span>    st<span style=color:#f92672>.</span>subheader(<span style=color:#e6db74>&#39;Raw data&#39;</span>)
</span></span><span style=display:flex><span>    st<span style=color:#f92672>.</span>write(data)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>st<span style=color:#f92672>.</span>subheader(<span style=color:#e6db74>&#39;Number of pickups by hour&#39;</span>)
</span></span><span style=display:flex><span>hist_values <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>histogram(<span style=color:#f92672>...</span>)
</span></span><span style=display:flex><span>st<span style=color:#f92672>.</span>bar_chart(hist_values)
</span></span></code></pre></div><p>This is an simplified example from the streamlit <a href=https://docs.streamlit.io/library/get-started/create-an-app>docs</a>.
It renders a checkbox that can be checked to show the data in a table and below that it displays a histogram of the data.
By using the checkbox method call inside the if statement condition the table is only rendered when the checkbox is checked.</p><p>The result looks like this:
<img alt="Steamlit web application that renders a historgramm and when a checkbox is checked also a table" loading=lazy src=/posts/streamlit-cadquery/streamlit.gif></p><p>I really like this approach to build simple user interfaces, because you don&rsquo;t have to worry about writing html/css/js + something on the server side and instead you just write a few lines of python code and get a good looking web interface.
Of course this approach is not feasible for complex or bigger web applications, but I think especially in the context of interactive data apps this is really cool.</p><h2 id=combining-the-two-tools>Combining the two tools<a hidden class=anchor aria-hidden=true href=#combining-the-two-tools>#</a></h2><p>Next up we will see how we can combine cadquery and streamlit to build a simple web interface for generating customizable 3d models.</p><p>We use cadquery to define a function that creates a 3d model and saves this model as a stl file. The model is a box with rounded edges and text embossed in it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate_model</span>(text: str):
</span></span><span style=display:flex><span>    model <span style=color:#f92672>=</span> (cq<span style=color:#f92672>.</span>Workplane()
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>box(<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>edges(<span style=color:#e6db74>&#34;|Z&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>fillet(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>faces(<span style=color:#e6db74>&#34;&gt;Z&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>workplane()<span style=color:#f92672>.</span>text(text, <span style=color:#ae81ff>5</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.4</span>)
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>    _, path <span style=color:#f92672>=</span> tempfile<span style=color:#f92672>.</span>mkstemp(suffix<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;.stl&#39;</span>)
</span></span><span style=display:flex><span>    cq<span style=color:#f92672>.</span>exporters<span style=color:#f92672>.</span>export(model, path)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> path 
</span></span></code></pre></div><p>Next up we use streamlit to render an input element and based on the value of this field we generate the model and show it using a custom streamlit component. Additionally we add a download button to enable downloading the model.</p><p>The custom streamlit component uses threejs under the hood to render the model in the browser and I will probably write a separate post about this component and publish it to the python registry later on.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>text <span style=color:#f92672>=</span> st<span style=color:#f92672>.</span>text_input(<span style=color:#e6db74>&#34;Text&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> text <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#34;&#34;</span>:
</span></span><span style=display:flex><span>    stl_path <span style=color:#f92672>=</span> generate_model(text)
</span></span><span style=display:flex><span>    sv<span style=color:#f92672>.</span>stl_viewer(stl_path)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(stl_path, <span style=color:#e6db74>&#39;rb&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>        st<span style=color:#f92672>.</span>download_button(
</span></span><span style=display:flex><span>            label<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Download model&#34;</span>,
</span></span><span style=display:flex><span>            data<span style=color:#f92672>=</span>f<span style=color:#f92672>.</span>read(),
</span></span><span style=display:flex><span>            file_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;model.stl&#39;</span>)
</span></span><span style=display:flex><span>    os<span style=color:#f92672>.</span>remove(file)
</span></span></code></pre></div><p>And that is all we need to do. The result is a simple interface to generate customizable 3d models that can then be downloaded and 3d printed.</p><p><img alt="Streamlit web application that has an input field and renders a 3d model based on that input field" loading=lazy src=/posts/streamlit-cadquery/result.gif></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://jakobemmerling.de/tags/python/>Python</a></li><li><a href=https://jakobemmerling.de/tags/3d-printing/>3d-Printing</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://jakobemmerling.de/>Jakob Emmerling</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>